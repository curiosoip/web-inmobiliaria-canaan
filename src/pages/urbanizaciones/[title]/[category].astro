---
// src/pages/[title]/[category].astro

import MainLayout from "../../../layouts/MainLayout.astro";
import FooterSection from "../../../sections/FooterSection.astro";
import SelectDepartament from "../../../components/SelectDepartament.astro";
import UrbanizacionesSection from "../../../sections/UrbanizacionesSection.astro";
import NavbarComponent from "../../../components/NavbarComponent.vue";
import ViviendasSection from "../../../sections/ViviendasSection.astro";

export async function getStaticPaths() {
  const pages = [
    { title: "lapaz", category: "lotes" },
    { title: "lapaz", category: "viviendas" },
    { title: "cochabamba", category: "lotes" },
    { title: "cochabamba", category: "viviendas" },
    { title: "santacruz", category: "lotes" },
    { title: "santacruz", category: "viviendas" },
  ];

  return pages.map((item) => ({
    params: {
      title: item.title,
      category: item.category, // ðŸ‘ˆ ya no array, string
    },
  }));
}

const { title, category } = Astro.params;
---

<MainLayout>
  <NavbarComponent client:load />

  <section
    id="servicios"
    class="flex bg-slate-900 flex-col w-full justify-center py-2 px-3 md:px-4 border-b-2 border-slate-400/10 items-center overflow-hidden"
  >
    <div class="w-full flex justify-between items-center max-w-8xl mx-auto">
      <h1
        class="font-bold flex flex-col md:flex-row w-full justify-start items-start lg:items-center md:gap-1"
      >
        <span class="block text-2xs lg:text-xs text-slate-100 px-2 py-1 bg-slate-800 rounded-full sm:mt-1 lg:ml-10">Urbanizaciones y Viviendas</span>
        <span class="block text-xl text-amber-400 px-2">Disponibles</span>
      </h1>
      <div class="w-[40vh] z-20">
        <SelectDepartament active={true} />
      </div>
    </div>
  </section>

  {category === "lotes" && <UrbanizacionesSection />}
  {category === "viviendas" && <ViviendasSection />}

  
  <FooterSection />
</MainLayout>
